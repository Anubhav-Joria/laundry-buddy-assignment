{"ast":null,"code":"import _defineProperty from\"C:/Users/anubhav/OneDrive/Desktop/laundry/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"C:/Users/anubhav/OneDrive/Desktop/laundry/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/anubhav/OneDrive/Desktop/laundry/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/anubhav/OneDrive/Desktop/laundry/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/anubhav/OneDrive/Desktop/laundry/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import firebase from'./firebase';import{RecaptchaVerifier}from\"firebase/auth\";import{getAuth,signInWithPhoneNumber}from\"firebase/auth\";import Document from'./component/Document';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(){var _this;_classCallCheck(this,App);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.handleChange=function(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;_this.setState(_defineProperty({},name,value));};_this.configureCaptcha=function(){var auth=getAuth();window.recaptchaVerifier=new RecaptchaVerifier('sign-in-button',{'size':'invisible','callback':function callback(response){// reCAPTCHA solved, allow signInWithPhoneNumber.\n_this.onSignInSubmit();console.log(\"recaptcha verified\");}},auth);};_this.onSignInSubmit=function(e){e.preventDefault();_this.configureCaptcha();var phoneNumber=\"+91\"+_this.state.mobile;console.log(phoneNumber);var appVerifier=window.recaptchaVerifier;var auth=getAuth();signInWithPhoneNumber(auth,phoneNumber,appVerifier).then(function(confirmationResult){window.confirmationResult=confirmationResult;console.log(\"otp has been sent\");}).catch(function(error){console.log(\"SMS not sent\");});};_this.onSubmitOTP=function(e){e.preventDefault();var code=_this.state.otp;console.log(code);window.confirmationResult.confirm(code).then(function(result){// User signed in successfully.\nvar user=result.user;console.log(JSON.stringify(user));alert(\"User is verified\");}).catch(function(error){// User couldn't sign in (bad verification code?)\n// ...\nconsole.log(\"Enter correct OTP\");});};return _this;}_createClass(App,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login Form\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSignInSubmit,children:[/*#__PURE__*/_jsx(\"div\",{id:\"sign-in-button\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"mobile\",placeholder:\"Mobile number\",required:true,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Enter OTP\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.onSubmitOTP,children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"otp\",placeholder:\"OTP Number\",required:true,onChange:this.handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),/*#__PURE__*/_jsx(Document,{})]});}}]);return App;}(React.Component);export default App;","map":{"version":3,"names":["React","firebase","RecaptchaVerifier","getAuth","signInWithPhoneNumber","Document","App","handleChange","e","target","name","value","setState","configureCaptcha","auth","window","recaptchaVerifier","response","onSignInSubmit","console","log","preventDefault","phoneNumber","state","mobile","appVerifier","then","confirmationResult","catch","error","onSubmitOTP","code","otp","confirm","result","user","JSON","stringify","alert","Component"],"sources":["C:/Users/anubhav/OneDrive/Desktop/laundry/src/App.js"],"sourcesContent":["import React from 'react'\nimport firebase from './firebase';\nimport { RecaptchaVerifier } from \"firebase/auth\";\nimport { getAuth, signInWithPhoneNumber } from \"firebase/auth\";\n\nimport Document from './component/Document';\n\nclass App extends React.Component {\n\n  handleChange = (e) =>{\n    const {name, value } = e.target\n    this.setState({\n        [name]: value\n      })\n  }\n\n  configureCaptcha = () =>{\n \n    const auth = getAuth();\n    window.recaptchaVerifier = new RecaptchaVerifier('sign-in-button', {\n      'size': 'invisible',\n      'callback': (response) => {\n        // reCAPTCHA solved, allow signInWithPhoneNumber.\n        this.onSignInSubmit();\n        console.log(\"recaptcha verified\")\n      }\n    }, auth);\n  }\n\n  onSignInSubmit = (e) =>{\n    e.preventDefault();\n    this.configureCaptcha();\n\n    const phoneNumber =\"+91\" +  this.state.mobile;\n    console.log(phoneNumber);\n\n    const appVerifier = window.recaptchaVerifier;\n    \n    const auth = getAuth();\n    signInWithPhoneNumber(auth, phoneNumber, appVerifier)\n        .then((confirmationResult) => {\n          window.confirmationResult = confirmationResult;\n          console.log(\"otp has been sent\")\n \n        }).catch((error) => {\n            console.log(\"SMS not sent\")\n        });\n\n  }\n\n  onSubmitOTP = e =>{\n    e.preventDefault();\n    const code = this.state.otp;\n    console.log(code);\n    window.confirmationResult.confirm(code).then((result) => {\n      // User signed in successfully.\n      const user = result.user;\n      console.log(JSON.stringify(user))\n      alert(\"User is verified\")\n    }).catch((error) => {\n      // User couldn't sign in (bad verification code?)\n      // ...\n      console.log(\"Enter correct OTP\");\n});\n  }\n\n  render() {\n    return (\n      <div>\n        <h2>Login Form</h2>\n        <form onSubmit={this.onSignInSubmit}>\n          <div id=\"sign-in-button\"></div>\n          <input type=\"number\" name=\"mobile\" placeholder=\"Mobile number\" required onChange={this.handleChange}/>\n          <button type=\"submit\">Submit</button>\n        </form>\n\n        <h2>Enter OTP</h2>\n        <form onSubmit={this.onSubmitOTP}>\n          <input type=\"number\" name=\"otp\" placeholder=\"OTP Number\" required onChange={this.handleChange}/>\n          <button type=\"submit\">Submit</button>\n        </form>\n\n        <Document/>\n      </div>\n    )\n  }\n}\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}